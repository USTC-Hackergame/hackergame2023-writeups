## ğŸª æµå¼æ˜Ÿçƒ

æ‹¿äº†ä¸ªä¸€è¡€ã€‚

> æµå¼æ˜Ÿäººç”¨æµå¼æ•°æ®äº¤æµï¼Œæ¯”å¦‚å¯¹äºè§†é¢‘æ¥è¯´ï¼Œä»–ä»¬ä¸éœ€è¦åŒæ—¶**çºµè§ˆæ•´ä¸ªç”»é¢**ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨åƒç´ æµã€‚

æ‰€ä»¥äººç±»çš„è§£é¢˜æ–¹æ³•å°±æ˜¯è‚‰çœ¼çºµè§ˆæ•´ä¸ªç”»é¢å¿«é€Ÿè¿‡å›¾ã€‚

`video.bin` æ˜¯ä¸ªæˆªæ–­äº†çš„ `count x height x width x 3` çš„ NumPy arrayã€‚åªè¦çŒœå¯¹ `width` å°±èƒ½æ‰“å‡ºæ¥äººçœ¼èƒ½è¾¨è®¤çš„å›¾åƒäº†ã€‚ç›´æ¥æšä¸¾åˆç†çš„ `width` èŒƒå›´ï¼Œè¾“å‡ºå›¾ç‰‡ï¼Œè‚‰çœ¼è¯†åˆ«å›¾åƒæ˜¯å¦æ­£ç¡®æ¢å¤å°±è¡Œã€‚ç”Ÿæˆå›¾ç‰‡çš„ä»£ç å¦‚ä¸‹ï¼š

```python
import numpy as np
import cv2

arr = np.fromfile('video.bin', dtype=np.uint8)
count = 0

for w in np.arange(100, 2000):
    img = arr[:w*w*3].reshape(w, w, 3)
    cv2.imwrite(f'output/im{w:04d}.png', img)
    count += 1
```

ä¹‹åç”¨ä¸€ä¸ªæ–¹ä¾¿çš„ image viewer ä¸€å¼ å¼ çœ‹å°±å¥½äº†ã€‚æˆ‘ç›´æ¥ç”¨çš„æ–‡ä»¶ç®¡ç†å™¨çš„å›¾ç‰‡é¢„è§ˆï¼ˆä¸Šé¢ä»£ç ç”Ÿæˆæ­£æ–¹å½¢å›¾ç‰‡ä¹Ÿæ˜¯ä¸ºäº†æ–¹ä¾¿çœ‹é¢„è§ˆï¼‰ï¼š

![stream-planet.webp](res/stream-planet.webp)

çŸ¥é“å®½åº¦åå‡ºå›¾ç»§ç»­è‚‰çœ¼æ‰¾ flagï¼Œé«˜åº¦ `h=500` æ˜¯çå†™çš„ï¼Œå¸§å¯¹ä¸é½ä¸å½±å“è‚‰çœ¼è¯†åˆ«å†…å®¹ï¼š

```python
w = 427
h = 500
img_size = w * h * 3
arr = arr[0:(arr.size // img_size) * img_size + 0]
imgs = arr.reshape(-1, h, w, 3)

for i in range(imgs.shape[0]):
    cv2.imwrite(f'output/im{i:04d}.png', imgs[i, ...])
```

**æ’æ›²**ï¼šé¢˜ç›®ä»£ç ä¸­çš„ `assert frame_width % 10 != 0` æ„Ÿè§‰æ˜¯å‘äººçš„ã€‚æˆ‘ä¸€å¼€å§‹çœ‹æˆç­‰äº 0 äº†ï¼Œç”¨äº† `np.arange(100, 2000, 10)`ï¼Œå¾—ä¸åˆ°æ­£ç¡®ç»“æœã€‚ä½†é—®é¢˜ä¹Ÿä¸å¤§ï¼Œä¼šå‘ç° `w=1280` æ—¶ä¼šå‡ºç°å‹‰å¼ºå¯ä»¥è¾¨è®¤çš„å›¾åƒï¼Œä½†æ¯è¡Œåç§»ä¸€ä¸ªåƒç´ ï¼Œäºæ˜¯é‡æ–°è¯•äº† `1281` å°±èƒ½å¾—åˆ°å¯¹é½çš„å›¾åƒäº†ã€‚è¿™æ˜¯æ­£ç¡®å®½åº¦ `427` çš„ä¸‰å€ã€‚